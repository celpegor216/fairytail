{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\S07P31C209\\\\frontend\\\\src\\\\components\\\\messageDetail\\\\Report.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Alert from '@common/Alert';\nimport { returnTrue, returnFalse, currentUser } from '@common/commonFunc';\nimport '@common/Common.scss';\nimport SelectBox from '../common/SelectBox';\nimport { reportMessage } from '@/apis/messageDetail/textDetail';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Report(_ref) {\n  _s();\n  let {\n    onCancel,\n    open,\n    type,\n    messageId\n  } = _ref;\n  // 선택한 신고 유형\n  const [reportType, setReportType] = useState(-1);\n  const [reportContent, setReportContent] = useState('');\n  const reportRef = useRef(null);\n  useEffect(() => {\n    window.addEventListener('mousedown', _ref2 => {\n      let {\n        target\n      } = _ref2;\n      if (reportRef.current && !reportRef.current.contains(target)) {\n        setReportType(-1);\n        onCancel();\n        setReportContent(() => '');\n      }\n    });\n  });\n  const [reported, setReported] = useState(false);\n  const navigate = useNavigate();\n  const userId = currentUser();\n  useEffect(() => {\n    // if (userId === -1) {\n    //   navigate(intro());\n    // }\n  }, []);\n  const reportedAlert = e => {\n    const data = {\n      content: reportContent,\n      type: reportType,\n      postId: messageId,\n      userId: userId\n    };\n    reportMessage(type, data).then(() => {\n      setReported(returnTrue);\n      setReportContent(() => '');\n      setReportType(-1);\n    });\n  };\n  const changeContent = e => {\n    setReportContent(() => e.target.value);\n  };\n  const closeAlert = () => {\n    setReported(returnFalse);\n    onCancel();\n  };\n  const closeReport = () => {\n    setReportContent(() => '');\n    onCancel();\n    setReportType(-1);\n  };\n  const options = ['저작권 위반', '개인정보 침해', '부적절한 내용', '불법 홍보', '기타'];\n  const info = {\n    title: '확인',\n    message: '신고가 접수되었습니다.'\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [open ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      ref: reportRef,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"modal-title\",\n        children: \"\\uC2E0\\uACE0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SelectBox, {\n        reportType: reportType,\n        setReportType: setReportType,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"modal-textarea\",\n        placeholder: \"\\uC2E0\\uACE0 \\uC0AC\\uC720\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n        maxLength: 100,\n        rows: 8,\n        value: reportContent,\n        onChange: changeContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: reportedAlert,\n          children: \"\\uD655\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: closeReport,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(Alert, {\n      info: info,\n      open: reported,\n      onConfirmed: closeAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Report, \"b4fqdnLZ7dqtX+dT37w8SpBUyjw=\", false, function () {\n  return [useNavigate];\n});\n_c = Report;\nexport default Report;\nvar _c;\n$RefreshReg$(_c, \"Report\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Alert","returnTrue","returnFalse","currentUser","SelectBox","reportMessage","useNavigate","Report","onCancel","open","type","messageId","reportType","setReportType","reportContent","setReportContent","reportRef","window","addEventListener","target","current","contains","reported","setReported","navigate","userId","reportedAlert","e","data","content","postId","then","changeContent","value","closeAlert","closeReport","options","info","title","message"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/components/messageDetail/Report.tsx"],"sourcesContent":["import React, {useState, useEffect, useRef, ReactHTMLElement} from 'react';\r\nimport Alert from '@common/Alert';\r\nimport {returnTrue, returnFalse, currentUser} from '@common/commonFunc';\r\nimport '@common/Common.scss';\r\nimport SelectBox from '../common/SelectBox';\r\nimport {reportMessage} from '@/apis/messageDetail/textDetail';\r\nimport {checkType} from '@/apis';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport {intro} from '@/apis/router';\r\n\r\ninterface ReportProps {\r\n  open: boolean;\r\n  onCancel: () => void;\r\n  type: string;\r\n  messageId: number;\r\n}\r\n\r\nfunction Report({onCancel, open, type, messageId}: ReportProps) {\r\n  // 선택한 신고 유형\r\n  const [reportType, setReportType] = useState(-1);\r\n  const [reportContent, setReportContent] = useState('');\r\n\r\n  const reportRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('mousedown', ({target}) => {\r\n      if (reportRef.current && !reportRef.current.contains(target as Node)) {\r\n        setReportType(-1);\r\n        onCancel();\r\n        setReportContent(() => '');\r\n      }\r\n    });\r\n  });\r\n\r\n  const [reported, setReported] = useState(false);\r\n  const navigate = useNavigate();\r\n  const userId = currentUser();\r\n  useEffect(() => {\r\n    // if (userId === -1) {\r\n    //   navigate(intro());\r\n    // }\r\n  }, []);\r\n\r\n  const reportedAlert = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    const data = {\r\n      content: reportContent,\r\n      type: reportType,\r\n      postId: messageId,\r\n      userId: userId,\r\n    };\r\n    reportMessage(type, data).then(() => {\r\n      setReported(returnTrue);\r\n      setReportContent(() => '');\r\n      setReportType(-1);\r\n    });\r\n  };\r\n\r\n  const changeContent = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setReportContent(() => e.target.value);\r\n  };\r\n\r\n  const closeAlert = () => {\r\n    setReported(returnFalse);\r\n    onCancel();\r\n  };\r\n\r\n  const closeReport = () => {\r\n    setReportContent(() => '');\r\n    onCancel();\r\n    setReportType(-1);\r\n  };\r\n\r\n  const options = [\r\n    '저작권 위반',\r\n    '개인정보 침해',\r\n    '부적절한 내용',\r\n    '불법 홍보',\r\n    '기타',\r\n  ];\r\n\r\n  const info = {title: '확인', message: '신고가 접수되었습니다.'};\r\n\r\n  return (\r\n    <>\r\n      {open ? (\r\n        <div className=\"modal\" ref={reportRef}>\r\n          <p className=\"modal-title\">신고</p>\r\n\r\n          <SelectBox\r\n            reportType={reportType}\r\n            setReportType={setReportType}\r\n            options={options}\r\n          />\r\n\r\n          <textarea\r\n            className=\"modal-textarea\"\r\n            placeholder=\"신고 사유를 입력해주세요.\"\r\n            maxLength={100}\r\n            rows={8}\r\n            value={reportContent}\r\n            onChange={changeContent}\r\n          />\r\n          <footer className=\"modal-footer\">\r\n            <button className=\"btn\" onClick={reportedAlert}>\r\n              확인\r\n            </button>\r\n            <button className=\"btn\" onClick={closeReport}>\r\n              취소\r\n            </button>\r\n          </footer>\r\n        </div>\r\n      ) : null}\r\n      <Alert info={info} open={reported} onConfirmed={closeAlert} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Report;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}