{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\S07P31C209\\\\frontend\\\\src\\\\components\\\\messageCreate\\\\Preview.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport MusicPlayer from '@messageCreate/MusicPlayer';\nimport { useRecoilState } from 'recoil';\nimport { playingState } from '@apis/recoil';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VideoPreview(_ref) {\n  _s();\n  var _videoRef$current2;\n  let {\n    fileURL\n  } = _ref;\n  // 배경음악\n  const [isPlayingBGM, setIsPlayingBGM] = useRecoilState(playingState);\n  const currentPlayingBGM = localStorage.getItem('isPlaying');\n  const videoRef = useRef(null);\n  useEffect(() => {\n    var _videoRef$current;\n    console.log('비디오 재생 여부 변경');\n    if ((_videoRef$current = videoRef.current) !== null && _videoRef$current !== void 0 && _videoRef$current.pause) {\n      if (currentPlayingBGM === 'true') {\n        setIsPlayingBGM(true);\n      }\n    } else {\n      setIsPlayingBGM(false);\n    }\n  }, [(_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.pause]);\n  return /*#__PURE__*/_jsxDEV(\"video\", {\n    ref: videoRef,\n    className: \"message-create-content-image\",\n    controls: true,\n    playsInline: true,\n    children: /*#__PURE__*/_jsxDEV(\"source\", {\n      src: fileURL\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, fileURL, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n\n// 전달받은 type에 따라 다른 미리보기 컴포넌트 반환\n_s(VideoPreview, \"Lb+xccxm9x0zim8opAmYauoOAKE=\", false, function () {\n  return [useRecoilState];\n});\n_c = VideoPreview;\nfunction Preview(_ref2) {\n  let {\n    type,\n    fileURL,\n    subtitle = '말소리가 없는 음성입니다.',\n    isDetail = false\n  } = _ref2;\n  let preview;\n  if (type === 0) {\n    preview = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-create-content-text message-create-content-text-preview\",\n      children: fileURL\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  } else if (type === 1) {\n    preview = /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"message-create-content-image\",\n      src: fileURL,\n      alt: \"\\uC0AC\\uC9C4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  } else if (type === 2) {\n    preview = /*#__PURE__*/_jsxDEV(VideoPreview, {\n      fileURL: fileURL\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }, this);\n  } else if (type === 3) {\n    preview = /*#__PURE__*/_jsxDEV(MusicPlayer, {\n      fileURL: fileURL,\n      subtitle: subtitle,\n      isDetail: isDetail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n  return preview;\n}\n_c2 = Preview;\nexport default Preview;\nvar _c, _c2;\n$RefreshReg$(_c, \"VideoPreview\");\n$RefreshReg$(_c2, \"Preview\");","map":{"version":3,"names":["useEffect","useRef","MusicPlayer","useRecoilState","playingState","VideoPreview","fileURL","isPlayingBGM","setIsPlayingBGM","currentPlayingBGM","localStorage","getItem","videoRef","console","log","current","pause","Preview","type","subtitle","isDetail","preview"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/components/messageCreate/Preview.tsx"],"sourcesContent":["import {useEffect, useRef} from 'react';\r\n\r\nimport MusicPlayer from '@messageCreate/MusicPlayer';\r\n\r\nimport {useRecoilState} from 'recoil';\r\nimport {playingState} from '@apis/recoil';\r\n\r\ntype PreviewProps = {\r\n  type: number;\r\n  fileURL: string;\r\n  subtitle?: string;\r\n  isDetail?: boolean;\r\n};\r\n\r\nfunction VideoPreview({fileURL}: {fileURL: string}) {\r\n  // 배경음악\r\n  const [isPlayingBGM, setIsPlayingBGM] = useRecoilState(playingState);\r\n  const currentPlayingBGM = localStorage.getItem('isPlaying');\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n\r\n  useEffect(() => {\r\n    console.log('비디오 재생 여부 변경');\r\n    if (videoRef.current?.pause) {\r\n      if (currentPlayingBGM === 'true') {\r\n        setIsPlayingBGM(true);\r\n      }\r\n    } else {\r\n      setIsPlayingBGM(false);\r\n    }\r\n  }, [videoRef.current?.pause]);\r\n\r\n  return (\r\n    <video\r\n      ref={videoRef}\r\n      key={fileURL}\r\n      className=\"message-create-content-image\"\r\n      controls={true}\r\n      playsInline={true}>\r\n      <source src={fileURL} />\r\n    </video>\r\n  );\r\n}\r\n\r\n// 전달받은 type에 따라 다른 미리보기 컴포넌트 반환\r\nfunction Preview({\r\n  type,\r\n  fileURL,\r\n  subtitle = '말소리가 없는 음성입니다.',\r\n  isDetail = false,\r\n}: PreviewProps) {\r\n  let preview: any;\r\n\r\n  if (type === 0) {\r\n    preview = (\r\n      <div className=\"message-create-content-text message-create-content-text-preview\">\r\n        {fileURL}\r\n      </div>\r\n    );\r\n  } else if (type === 1) {\r\n    preview = (\r\n      <img className=\"message-create-content-image\" src={fileURL} alt=\"사진\" />\r\n    );\r\n  } else if (type === 2) {\r\n    preview = <VideoPreview fileURL={fileURL} />;\r\n  } else if (type === 3) {\r\n    preview = (\r\n      <MusicPlayer fileURL={fileURL} subtitle={subtitle} isDetail={isDetail} />\r\n    );\r\n  }\r\n\r\n  return preview;\r\n}\r\n\r\nexport default Preview;\r\n"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,MAAM,QAAO,OAAO;AAEvC,OAAOC,WAAW,MAAM,4BAA4B;AAEpD,SAAQC,cAAc,QAAO,QAAQ;AACrC,SAAQC,YAAY,QAAO,cAAc;AAAC;AAS1C,SAASC,YAAY,OAA+B;EAAA;EAAA;EAAA,IAA9B;IAACC;EAA0B,CAAC;EAChD;EACA,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGL,cAAc,CAACC,YAAY,CAAC;EACpE,MAAMK,iBAAiB,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAE3D,MAAMC,QAAQ,GAAGX,MAAM,CAAmB,IAAI,CAAC;EAE/CD,SAAS,CAAC,MAAM;IAAA;IACda,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC3B,yBAAIF,QAAQ,CAACG,OAAO,8CAAhB,kBAAkBC,KAAK,EAAE;MAC3B,IAAIP,iBAAiB,KAAK,MAAM,EAAE;QAChCD,eAAe,CAAC,IAAI,CAAC;MACvB;IACF,CAAC,MAAM;MACLA,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC,EAAE,uBAACI,QAAQ,CAACG,OAAO,uDAAhB,mBAAkBC,KAAK,CAAC,CAAC;EAE7B,oBACE;IACE,GAAG,EAAEJ,QAAS;IAEd,SAAS,EAAC,8BAA8B;IACxC,QAAQ,EAAE,IAAK;IACf,WAAW,EAAE,IAAK;IAAA,uBAClB;MAAQ,GAAG,EAAEN;IAAQ;MAAA;MAAA;MAAA;IAAA;EAAG,GAJnBA,OAAO;IAAA;IAAA;IAAA;EAAA,QAKN;AAEZ;;AAEA;AAAA,GA9BSD,YAAY;EAAA,QAEqBF,cAAc;AAAA;AAAA,KAF/CE,YAAY;AA+BrB,SAASY,OAAO,QAKC;EAAA,IALA;IACfC,IAAI;IACJZ,OAAO;IACPa,QAAQ,GAAG,gBAAgB;IAC3BC,QAAQ,GAAG;EACC,CAAC;EACb,IAAIC,OAAY;EAEhB,IAAIH,IAAI,KAAK,CAAC,EAAE;IACdG,OAAO,gBACL;MAAK,SAAS,EAAC,iEAAiE;MAAA,UAC7Ef;IAAO;MAAA;MAAA;MAAA;IAAA,QAEX;EACH,CAAC,MAAM,IAAIY,IAAI,KAAK,CAAC,EAAE;IACrBG,OAAO,gBACL;MAAK,SAAS,EAAC,8BAA8B;MAAC,GAAG,EAAEf,OAAQ;MAAC,GAAG,EAAC;IAAI;MAAA;MAAA;MAAA;IAAA,QACrE;EACH,CAAC,MAAM,IAAIY,IAAI,KAAK,CAAC,EAAE;IACrBG,OAAO,gBAAG,QAAC,YAAY;MAAC,OAAO,EAAEf;IAAQ;MAAA;MAAA;MAAA;IAAA,QAAG;EAC9C,CAAC,MAAM,IAAIY,IAAI,KAAK,CAAC,EAAE;IACrBG,OAAO,gBACL,QAAC,WAAW;MAAC,OAAO,EAAEf,OAAQ;MAAC,QAAQ,EAAEa,QAAS;MAAC,QAAQ,EAAEC;IAAS;MAAA;MAAA;MAAA;IAAA,QACvE;EACH;EAEA,OAAOC,OAAO;AAChB;AAAC,MA3BQJ,OAAO;AA6BhB,eAAeA,OAAO;AAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}