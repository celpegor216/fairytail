{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Administrator/Desktop/S07P31C209/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Administrator/Desktop/S07P31C209/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/S07P31C209/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useEffect}from'react';import{useNavigate,useParams}from'react-router';import{useRecoilState}from'recoil';import{loadingState}from'@apis/Recoil';import{ReactComponent as EllipsisVertical}from'@images/ellipsisVertical.svg';import MoreMenu from'@common/MoreMenu';import Content from'@messageDetail/Content';import Like from'@messageDetail/Like';import MoveToBack from'@common/MoveToBack';import{notFound}from'@apis/router';import'@screens/MessageDetail.scss';import InitMessage from'@/apis/notifications/foregroundMessaging';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MessageDetail(){// recoil\nvar _useRecoilState=useRecoilState(loadingState),_useRecoilState2=_slicedToArray(_useRecoilState,2),isLoading=_useRecoilState2[0],setIsLoading=_useRecoilState2[1];setIsLoading(true);// 풍선 저장 관련\nvar messageDetailRef=useRef(null);// 전달 받은 messageId가 숫자가 아니라면 notfound로 이동\nvar navigate=useNavigate();var params=useParams();var messageId=params.id;useEffect(function(){loader();},[]);var loader=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!messageId||!parseInt(messageId)){navigate(notFound());}case 1:case\"end\":return _context.stop();}}},_callee);}));return function loader(){return _ref.apply(this,arguments);};}();// 현재 사용자 정보\nvar currentUserId=1;// 서버 통신으로 게시글 정보 가져오기\nvar data={title:'여우비 가온해 안녕',content:'바나나 아련 노트북 포도 늘품 미리내 바나나 그루잠 감사합니다 노트북 바람꽃 아련 별하 소록소록 산들림 함초롱하다 아련 늘품 감또개 이플 컴퓨터 노트북 나래 산들림 도르레 가온해!',like_cnt:121,is_like:true,date:new Date(),user_id:0,type:0,emoji_no:15,status:0,background:1};// 현재 사용자가 작성한 게시글인지 확인\nvar isMine=currentUserId===data.user_id;// 메뉴 표시 여부\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),more=_useState2[0],setMore=_useState2[1];var hiddenMenu=function hiddenMenu(){if(more)setMore(false);};var showMenu=function showMenu(){return setMore(!more);};// 날짜 형식에 맞춰 표시\nvar modifiedDate=function modifiedDate(){var month=data.date.getMonth();if(month<10)month='0'+month;var day=data.date.getDate();if(day<10)day='0'+day;return\"\".concat(data.date.getFullYear(),\"-\").concat(month,\"-\").concat(day);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(InitMessage,{}),/*#__PURE__*/_jsx(\"div\",{className:\"screen background\".concat(data.background),ref:messageDetailRef,onClick:hiddenMenu,children:/*#__PURE__*/_jsxs(\"main\",{id:\"container\",children:[/*#__PURE__*/_jsxs(\"section\",{\"data-html2canvas-ignore\":\"true\",className:\"ignore\",children:[/*#__PURE__*/_jsx(MoveToBack,{path:\"\"}),/*#__PURE__*/_jsx(\"div\",{id:\"message-detail-nav-more\",onClick:showMenu,children:/*#__PURE__*/_jsx(EllipsisVertical,{width:\"32\",height:\"32\",fill:\"white\"})}),/*#__PURE__*/_jsx(MoreMenu,{open:more,isMine:isMine,detail:messageDetailRef,messageId:messageId,type:data.type,content:data.content,close:hiddenMenu,status:data.status})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"container\",children:[/*#__PURE__*/_jsx(Content,{title:data.title,content:data.content,type:data.type,date:modifiedDate(),status:data.status}),/*#__PURE__*/_jsx(Like,{count:data.like_cnt,like:data.is_like,isMine:isMine,emoji:data.emoji_no})]})]})})]});}export default MessageDetail;","map":{"version":3,"names":["useState","useRef","useEffect","useNavigate","useParams","useRecoilState","loadingState","ReactComponent","EllipsisVertical","MoreMenu","Content","Like","MoveToBack","notFound","InitMessage","MessageDetail","isLoading","setIsLoading","messageDetailRef","navigate","params","messageId","id","loader","parseInt","currentUserId","data","title","content","like_cnt","is_like","date","Date","user_id","type","emoji_no","status","background","isMine","more","setMore","hiddenMenu","showMenu","modifiedDate","month","getMonth","day","getDate","getFullYear"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/screens/MessageDetail.tsx"],"sourcesContent":["import {useState, useRef, useEffect} from 'react';\r\nimport {useNavigate, useParams} from 'react-router';\r\nimport {useRecoilState} from 'recoil';\r\nimport {loadingState} from '@apis/Recoil';\r\nimport {ReactComponent as EllipsisVertical} from '@images/ellipsisVertical.svg';\r\nimport MoreMenu from '@common/MoreMenu';\r\nimport Content from '@messageDetail/Content';\r\nimport Like from '@messageDetail/Like';\r\nimport MoveToBack from '@common/MoveToBack';\r\nimport {notFound} from '@apis/router';\r\nimport '@screens/MessageDetail.scss';\r\nimport InitMessage from '@/apis/notifications/foregroundMessaging';\r\n\r\nfunction MessageDetail() {\r\n  // recoil\r\n  const [isLoading, setIsLoading] = useRecoilState(loadingState);\r\n  setIsLoading(true);\r\n\r\n  // 풍선 저장 관련\r\n  const messageDetailRef = useRef(null!);\r\n\r\n  // 전달 받은 messageId가 숫자가 아니라면 notfound로 이동\r\n  const navigate = useNavigate();\r\n  const params = useParams();\r\n  const messageId = params.id;\r\n\r\n  useEffect(() => {\r\n    loader();\r\n  }, []);\r\n\r\n  const loader = async () => {\r\n    if (!messageId || !parseInt(messageId)) {\r\n      navigate(notFound());\r\n    }\r\n  };\r\n\r\n  // 현재 사용자 정보\r\n  const currentUserId = 1;\r\n\r\n  // 서버 통신으로 게시글 정보 가져오기\r\n  const data = {\r\n    title: '여우비 가온해 안녕',\r\n    content:\r\n      '바나나 아련 노트북 포도 늘품 미리내 바나나 그루잠 감사합니다 노트북 바람꽃 아련 별하 소록소록 산들림 함초롱하다 아련 늘품 감또개 이플 컴퓨터 노트북 나래 산들림 도르레 가온해!',\r\n    like_cnt: 121,\r\n    is_like: true,\r\n    date: new Date(),\r\n    user_id: 0,\r\n    type: 0,\r\n    emoji_no: 15,\r\n    status: 0,\r\n    background: 1,\r\n  };\r\n\r\n  // 현재 사용자가 작성한 게시글인지 확인\r\n  const isMine = currentUserId === data.user_id;\r\n\r\n  // 메뉴 표시 여부\r\n  const [more, setMore] = useState(false);\r\n\r\n  const hiddenMenu = () => {\r\n    if (more) setMore(false);\r\n  };\r\n\r\n  const showMenu = () => setMore(!more);\r\n\r\n  // 날짜 형식에 맞춰 표시\r\n  const modifiedDate = () => {\r\n    let month: number | string = data.date.getMonth();\r\n    if (month < 10) month = '0' + month;\r\n    let day: number | string = data.date.getDate();\r\n    if (day < 10) day = '0' + day;\r\n    return `${data.date.getFullYear()}-${month}-${day}`;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <InitMessage />\r\n      <div\r\n        className={`screen background${data.background}`}\r\n        ref={messageDetailRef}\r\n        onClick={hiddenMenu}>\r\n        <main id=\"container\">\r\n          <section data-html2canvas-ignore=\"true\" className=\"ignore\">\r\n            <MoveToBack path=\"\" />\r\n            <div id=\"message-detail-nav-more\" onClick={showMenu}>\r\n              <EllipsisVertical width=\"32\" height=\"32\" fill=\"white\" />\r\n            </div>\r\n            <MoreMenu\r\n              open={more}\r\n              isMine={isMine}\r\n              detail={messageDetailRef}\r\n              messageId={messageId}\r\n              type={data.type}\r\n              content={data.content}\r\n              close={hiddenMenu}\r\n              status={data.status}\r\n            />\r\n          </section>\r\n          <section className=\"container\">\r\n            <Content\r\n              title={data.title}\r\n              content={data.content}\r\n              type={data.type}\r\n              date={modifiedDate()}\r\n              status={data.status}\r\n            />\r\n            <Like\r\n              count={data.like_cnt}\r\n              like={data.is_like}\r\n              isMine={isMine}\r\n              emoji={data.emoji_no}\r\n            />\r\n          </section>\r\n        </main>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MessageDetail;\r\n"],"mappings":"waAAA,OAAQA,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAO,OAAO,CACjD,OAAQC,WAAW,CAAEC,SAAS,KAAO,cAAc,CACnD,OAAQC,cAAc,KAAO,QAAQ,CACrC,OAAQC,YAAY,KAAO,cAAc,CACzC,OAAQC,cAAc,GAAIC,iBAAgB,KAAO,8BAA8B,CAC/E,MAAOC,SAAQ,KAAM,kBAAkB,CACvC,MAAOC,QAAO,KAAM,wBAAwB,CAC5C,MAAOC,KAAI,KAAM,qBAAqB,CACtC,MAAOC,WAAU,KAAM,oBAAoB,CAC3C,OAAQC,QAAQ,KAAO,cAAc,CACrC,MAAO,6BAA6B,CACpC,MAAOC,YAAW,KAAM,0CAA0C,CAAC,6IAEnE,QAASC,cAAa,EAAG,CACvB;AACA,oBAAkCV,cAAc,CAACC,YAAY,CAAC,oDAAvDU,SAAS,qBAAEC,YAAY,qBAC9BA,YAAY,CAAC,IAAI,CAAC,CAElB;AACA,GAAMC,iBAAgB,CAAGjB,MAAM,CAAC,IAAI,CAAE,CAEtC;AACA,GAAMkB,SAAQ,CAAGhB,WAAW,EAAE,CAC9B,GAAMiB,OAAM,CAAGhB,SAAS,EAAE,CAC1B,GAAMiB,UAAS,CAAGD,MAAM,CAACE,EAAE,CAE3BpB,SAAS,CAAC,UAAM,CACdqB,MAAM,EAAE,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMA,OAAM,4FAAG,qIACb,GAAI,CAACF,SAAS,EAAI,CAACG,QAAQ,CAACH,SAAS,CAAC,CAAE,CACtCF,QAAQ,CAACN,QAAQ,EAAE,CAAC,CACtB,CAAC,sDACF,kBAJKU,OAAM,0CAIX,CAED;AACA,GAAME,cAAa,CAAG,CAAC,CAEvB;AACA,GAAMC,KAAI,CAAG,CACXC,KAAK,CAAE,YAAY,CACnBC,OAAO,CACL,sGAAsG,CACxGC,QAAQ,CAAE,GAAG,CACbC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,GAAIC,KAAI,EAAE,CAChBC,OAAO,CAAE,CAAC,CACVC,IAAI,CAAE,CAAC,CACPC,QAAQ,CAAE,EAAE,CACZC,MAAM,CAAE,CAAC,CACTC,UAAU,CAAE,CACd,CAAC,CAED;AACA,GAAMC,OAAM,CAAGb,aAAa,GAAKC,IAAI,CAACO,OAAO,CAE7C;AACA,cAAwBjC,QAAQ,CAAC,KAAK,CAAC,wCAAhCuC,IAAI,eAAEC,OAAO,eAEpB,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACvB,GAAIF,IAAI,CAAEC,OAAO,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,GAAME,SAAQ,CAAG,QAAXA,SAAQ,SAASF,QAAO,CAAC,CAACD,IAAI,CAAC,GAErC;AACA,GAAMI,aAAY,CAAG,QAAfA,aAAY,EAAS,CACzB,GAAIC,MAAsB,CAAGlB,IAAI,CAACK,IAAI,CAACc,QAAQ,EAAE,CACjD,GAAID,KAAK,CAAG,EAAE,CAAEA,KAAK,CAAG,GAAG,CAAGA,KAAK,CACnC,GAAIE,IAAoB,CAAGpB,IAAI,CAACK,IAAI,CAACgB,OAAO,EAAE,CAC9C,GAAID,GAAG,CAAG,EAAE,CAAEA,GAAG,CAAG,GAAG,CAAGA,GAAG,CAC7B,gBAAUpB,IAAI,CAACK,IAAI,CAACiB,WAAW,EAAE,aAAIJ,KAAK,aAAIE,GAAG,EACnD,CAAC,CAED,mBACE,wCACE,KAAC,WAAW,IAAG,cACf,YACE,SAAS,4BAAsBpB,IAAI,CAACW,UAAU,CAAG,CACjD,GAAG,CAAEnB,gBAAiB,CACtB,OAAO,CAAEuB,UAAW,uBACpB,cAAM,EAAE,CAAC,WAAW,wBAClB,iBAAS,0BAAwB,MAAM,CAAC,SAAS,CAAC,QAAQ,wBACxD,KAAC,UAAU,EAAC,IAAI,CAAC,EAAE,EAAG,cACtB,YAAK,EAAE,CAAC,yBAAyB,CAAC,OAAO,CAAEC,QAAS,uBAClD,KAAC,gBAAgB,EAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAG,EACpD,cACN,KAAC,QAAQ,EACP,IAAI,CAAEH,IAAK,CACX,MAAM,CAAED,MAAO,CACf,MAAM,CAAEpB,gBAAiB,CACzB,SAAS,CAAEG,SAAU,CACrB,IAAI,CAAEK,IAAI,CAACQ,IAAK,CAChB,OAAO,CAAER,IAAI,CAACE,OAAQ,CACtB,KAAK,CAAEa,UAAW,CAClB,MAAM,CAAEf,IAAI,CAACU,MAAO,EACpB,GACM,cACV,iBAAS,SAAS,CAAC,WAAW,wBAC5B,KAAC,OAAO,EACN,KAAK,CAAEV,IAAI,CAACC,KAAM,CAClB,OAAO,CAAED,IAAI,CAACE,OAAQ,CACtB,IAAI,CAAEF,IAAI,CAACQ,IAAK,CAChB,IAAI,CAAES,YAAY,EAAG,CACrB,MAAM,CAAEjB,IAAI,CAACU,MAAO,EACpB,cACF,KAAC,IAAI,EACH,KAAK,CAAEV,IAAI,CAACG,QAAS,CACrB,IAAI,CAAEH,IAAI,CAACI,OAAQ,CACnB,MAAM,CAAEQ,MAAO,CACf,KAAK,CAAEZ,IAAI,CAACS,QAAS,EACrB,GACM,GACL,EACH,GACL,CAEP,CAEA,cAAepB,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}