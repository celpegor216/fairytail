{"ast":null,"code":"// ** fcm으로 요청보낼 때 필요한 토큰 관련\n\nimport { getMessaging, getToken } from 'firebase/messaging';\nimport { app } from '@apis/notifications/firebaseConfig';\nconst messaging = getMessaging(app);\n\n// 토큰 받아오기\nexport const initToken = async () => {\n  const token = getToken(messaging, {\n    vapidKey: process.env.REACT_APP_VAPID_KEY\n  }).then(currentToken => {\n    if (currentToken) {\n      return currentToken;\n    } else {\n      console.log('No registration token available. Request permission to generate one.');\n      return '';\n    }\n  }).catch(err => {\n    console.log('An error occurred while retrieving token. ', err);\n    return '';\n  });\n  return token;\n};\n\n// 등록 토큰에 액세스 (알림 권한 요청)\nexport const requestPermission = () => {\n  Notification.requestPermission().then(permission => {\n    if (permission !== 'denied') {\n      localStorage.setItem('noti', 'true');\n    }\n  });\n};","map":{"version":3,"names":["getMessaging","getToken","app","messaging","initToken","token","vapidKey","process","env","REACT_APP_VAPID_KEY","then","currentToken","console","log","catch","err","requestPermission","Notification","permission","localStorage","setItem"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/apis/notifications/getMessagingToken.ts"],"sourcesContent":["// ** fcm으로 요청보낼 때 필요한 토큰 관련\r\n\r\nimport {getMessaging, getToken} from 'firebase/messaging';\r\nimport {app} from '@apis/notifications/firebaseConfig';\r\n\r\nconst messaging = getMessaging(app);\r\n\r\n// 토큰 받아오기\r\nexport const initToken = async () => {\r\n  const token = getToken(messaging, {\r\n    vapidKey: process.env.REACT_APP_VAPID_KEY,\r\n  })\r\n    .then(currentToken => {\r\n      if (currentToken) {\r\n        return currentToken;\r\n      } else {\r\n        console.log(\r\n          'No registration token available. Request permission to generate one.',\r\n        );\r\n        return '';\r\n      }\r\n    })\r\n    .catch(err => {\r\n      console.log('An error occurred while retrieving token. ', err);\r\n      return '';\r\n    });\r\n  return token;\r\n};\r\n\r\n// 등록 토큰에 액세스 (알림 권한 요청)\r\nexport const requestPermission = () => {\r\n  Notification.requestPermission().then(permission => {\r\n    if (permission !== 'denied') {\r\n      localStorage.setItem('noti', 'true');\r\n    }\r\n  });\r\n};\r\n"],"mappings":"AAAA;;AAEA,SAAQA,YAAY,EAAEC,QAAQ,QAAO,oBAAoB;AACzD,SAAQC,GAAG,QAAO,oCAAoC;AAEtD,MAAMC,SAAS,GAAGH,YAAY,CAACE,GAAG,CAAC;;AAEnC;AACA,OAAO,MAAME,SAAS,GAAG,YAAY;EACnC,MAAMC,KAAK,GAAGJ,QAAQ,CAACE,SAAS,EAAE;IAChCG,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC;EACxB,CAAC,CAAC,CACCC,IAAI,CAACC,YAAY,IAAI;IACpB,IAAIA,YAAY,EAAE;MAChB,OAAOA,YAAY;IACrB,CAAC,MAAM;MACLC,OAAO,CAACC,GAAG,CACT,sEAAsE,CACvE;MACD,OAAO,EAAE;IACX;EACF,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;IACZH,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAEE,GAAG,CAAC;IAC9D,OAAO,EAAE;EACX,CAAC,CAAC;EACJ,OAAOV,KAAK;AACd,CAAC;;AAED;AACA,OAAO,MAAMW,iBAAiB,GAAG,MAAM;EACrCC,YAAY,CAACD,iBAAiB,EAAE,CAACN,IAAI,CAACQ,UAAU,IAAI;IAClD,IAAIA,UAAU,KAAK,QAAQ,EAAE;MAC3BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;IACtC;EACF,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}