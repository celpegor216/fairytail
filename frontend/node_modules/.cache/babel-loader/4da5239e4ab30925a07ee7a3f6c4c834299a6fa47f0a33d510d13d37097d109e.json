{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/Administrator/Desktop/S07P31C209/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"C:/Users/Administrator/Desktop/S07P31C209/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/S07P31C209/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React,{useState,useRef}from'react';import styled from'styled-components';import'./MusicPlayer.scss';import{ReactComponent as Play}from'@images/play.svg';import{ReactComponent as Pause}from'@images/pause.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MusicPlayer(_ref){var fileURL=_ref.fileURL;var audioRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPlaying=_useState2[0],setIsPlaying=_useState2[1];var _useState3=useState({currentTime:0,duration:0}),_useState4=_slicedToArray(_useState3,2),audioInfo=_useState4[0],setAudioInfo=_useState4[1];var handleUpdateTime=function handleUpdateTime(e){var target=e.target;if(target.localName==='audio'){var currentTime=target.currentTime;var duration=target.duration;setAudioInfo(_objectSpread(_objectSpread({},audioInfo),{},{currentTime:currentTime,duration:duration}));}};var handleChangeFile=function handleChangeFile(e){handleUpdateTime(e);setIsPlaying(false);};var handlePlay=function handlePlay(){if(isPlaying){audioRef.current&&audioRef.current.pause();}else{audioRef.current&&audioRef.current.play();}setIsPlaying(function(prev){return!prev;});};var handleDrag=function handleDrag(e){if(audioRef.current){audioRef.current.currentTime=Number(e.target.value);}setAudioInfo(_objectSpread(_objectSpread({},audioInfo),{},{currentTime:Number(e.target.value)}));};var getTime=function getTime(time){var minute=Math.floor(time/60);var second=('0'+Math.floor(time%60)).slice(-2);return\"\".concat(minute,\":\").concat(second);};return/*#__PURE__*/_jsxs(\"div\",{className:\"music-player-container\",children:[isPlaying?/*#__PURE__*/_jsx(Pause,{width:\"70%\",height:\"70%\",fill:\"#b49aff\",onClick:handlePlay,className:\"play-btn\"}):/*#__PURE__*/_jsx(Play,{width:\"70%\",height:\"70%\",fill:\"#b49aff\",onClick:handlePlay,className:\"play-btn\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"track\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"track-input\",onChange:handleDrag,min:0,max:audioInfo.duration||0,value:audioInfo.currentTime,type:\"range\"}),/*#__PURE__*/_jsx(AnimateTrack,{audioInfo:audioInfo})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:getTime(audioInfo.currentTime||0)}),/*#__PURE__*/_jsx(\"span\",{children:getTime(audioInfo.duration||0)})]})]}),/*#__PURE__*/_jsx(\"audio\",{onLoadedMetadata:handleChangeFile,onTimeUpdate:handleUpdateTime,onEnded:handlePlay,ref:audioRef,src:fileURL})]});}var AnimateTrack=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background: rgb(204, 204, 204);\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  transform: translateX(\\n    \",\"\\n  );\\n  pointer-events: none;\\n\"])),function(_ref2){var audioInfo=_ref2.audioInfo;return Math.round(audioInfo.currentTime*100/audioInfo.duration)+'%';});export default MusicPlayer;","map":{"version":3,"names":["React","useState","useRef","styled","ReactComponent","Play","Pause","MusicPlayer","fileURL","audioRef","isPlaying","setIsPlaying","currentTime","duration","audioInfo","setAudioInfo","handleUpdateTime","e","target","localName","handleChangeFile","handlePlay","current","pause","play","prev","handleDrag","Number","value","getTime","time","minute","Math","floor","second","slice","AnimateTrack","div","round"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/components/messageCreate/MusicPlayer.tsx"],"sourcesContent":["import React, {useState, useRef} from 'react';\r\nimport styled from 'styled-components';\r\nimport './MusicPlayer.scss';\r\nimport {ReactComponent as Play} from '@images/play.svg';\r\nimport {ReactComponent as Pause} from '@images/pause.svg';\r\n\r\ntype MusicPlayerProps = {\r\n  fileURL: string;\r\n};\r\n\r\ntype AudioInfo = {\r\n  currentTime: number;\r\n  duration: number;\r\n};\r\n\r\nfunction MusicPlayer({fileURL}: MusicPlayerProps) {\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [audioInfo, setAudioInfo] = useState({\r\n    currentTime: 0,\r\n    duration: 0,\r\n  });\r\n\r\n  const handleUpdateTime = (\r\n    e: React.SyntheticEvent<HTMLAudioElement, Event>,\r\n  ) => {\r\n    const target = e.target as HTMLAudioElement;\r\n\r\n    if (target.localName === 'audio') {\r\n      const currentTime = target.currentTime;\r\n      const duration = target.duration;\r\n      setAudioInfo({...audioInfo, currentTime, duration});\r\n    }\r\n  };\r\n\r\n  const handleChangeFile = (\r\n    e: React.SyntheticEvent<HTMLAudioElement, Event>,\r\n  ) => {\r\n    handleUpdateTime(e);\r\n    setIsPlaying(false);\r\n  };\r\n\r\n  const handlePlay = () => {\r\n    if (isPlaying) {\r\n      audioRef.current && audioRef.current.pause();\r\n    } else {\r\n      audioRef.current && audioRef.current.play();\r\n    }\r\n    setIsPlaying(prev => !prev);\r\n  };\r\n\r\n  const handleDrag = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = Number(e.target.value);\r\n    }\r\n    setAudioInfo({...audioInfo, currentTime: Number(e.target.value)});\r\n  };\r\n\r\n  const getTime = (time: number) => {\r\n    const minute = Math.floor(time / 60);\r\n    const second = ('0' + Math.floor(time % 60)).slice(-2);\r\n    return `${minute}:${second}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"music-player-container\">\r\n      {isPlaying ? (\r\n        <Pause\r\n          width=\"70%\"\r\n          height=\"70%\"\r\n          fill=\"#b49aff\"\r\n          onClick={handlePlay}\r\n          className=\"play-btn\"\r\n        />\r\n      ) : (\r\n        <Play\r\n          width=\"70%\"\r\n          height=\"70%\"\r\n          fill=\"#b49aff\"\r\n          onClick={handlePlay}\r\n          className=\"play-btn\"\r\n        />\r\n      )}\r\n\r\n      <div className=\"track-container\">\r\n        <div className=\"track\">\r\n          <input\r\n            className=\"track-input\"\r\n            onChange={handleDrag}\r\n            min={0}\r\n            max={audioInfo.duration || 0}\r\n            value={audioInfo.currentTime}\r\n            type=\"range\"\r\n          />\r\n          <AnimateTrack audioInfo={audioInfo} />\r\n        </div>\r\n\r\n        <div className=\"time-container\">\r\n          <span>{getTime(audioInfo.currentTime || 0)}</span>\r\n          <span>{getTime(audioInfo.duration || 0)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <audio\r\n        onLoadedMetadata={handleChangeFile}\r\n        onTimeUpdate={handleUpdateTime}\r\n        onEnded={handlePlay}\r\n        ref={audioRef}\r\n        src={fileURL}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst AnimateTrack = styled.div`\r\n  background: rgb(204, 204, 204);\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  transform: translateX(\r\n    ${({audioInfo}: {audioInfo: AudioInfo}) =>\r\n      Math.round((audioInfo.currentTime * 100) / audioInfo.duration) + '%'}\r\n  );\r\n  pointer-events: none;\r\n`;\r\n\r\nexport default MusicPlayer;\r\n"],"mappings":"2bAAA,MAAOA,MAAK,EAAGC,QAAQ,CAAEC,MAAM,KAAO,OAAO,CAC7C,MAAOC,OAAM,KAAM,mBAAmB,CACtC,MAAO,oBAAoB,CAC3B,OAAQC,cAAc,GAAIC,KAAI,KAAO,kBAAkB,CACvD,OAAQD,cAAc,GAAIE,MAAK,KAAO,mBAAmB,CAAC,wFAW1D,QAASC,YAAW,MAA8B,IAA5BC,QAAO,MAAPA,OAAO,CAC3B,GAAMC,SAAQ,CAAGP,MAAM,CAAmB,IAAI,CAAC,CAE/C,cAAkCD,QAAQ,CAAC,KAAK,CAAC,wCAA1CS,SAAS,eAAEC,YAAY,eAC9B,eAAkCV,QAAQ,CAAC,CACzCW,WAAW,CAAE,CAAC,CACdC,QAAQ,CAAE,CACZ,CAAC,CAAC,yCAHKC,SAAS,eAAEC,YAAY,eAK9B,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,CACpBC,CAAgD,CAC7C,CACH,GAAMC,OAAM,CAAGD,CAAC,CAACC,MAA0B,CAE3C,GAAIA,MAAM,CAACC,SAAS,GAAK,OAAO,CAAE,CAChC,GAAMP,YAAW,CAAGM,MAAM,CAACN,WAAW,CACtC,GAAMC,SAAQ,CAAGK,MAAM,CAACL,QAAQ,CAChCE,YAAY,gCAAKD,SAAS,MAAEF,WAAW,CAAXA,WAAW,CAAEC,QAAQ,CAARA,QAAQ,GAAE,CACrD,CACF,CAAC,CAED,GAAMO,iBAAgB,CAAG,QAAnBA,iBAAgB,CACpBH,CAAgD,CAC7C,CACHD,gBAAgB,CAACC,CAAC,CAAC,CACnBN,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED,GAAMU,WAAU,CAAG,QAAbA,WAAU,EAAS,CACvB,GAAIX,SAAS,CAAE,CACbD,QAAQ,CAACa,OAAO,EAAIb,QAAQ,CAACa,OAAO,CAACC,KAAK,EAAE,CAC9C,CAAC,IAAM,CACLd,QAAQ,CAACa,OAAO,EAAIb,QAAQ,CAACa,OAAO,CAACE,IAAI,EAAE,CAC7C,CACAb,YAAY,CAAC,SAAAc,IAAI,QAAI,CAACA,IAAI,GAAC,CAC7B,CAAC,CAED,GAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIT,CAAsC,CAAK,CAC7D,GAAIR,QAAQ,CAACa,OAAO,CAAE,CACpBb,QAAQ,CAACa,OAAO,CAACV,WAAW,CAAGe,MAAM,CAACV,CAAC,CAACC,MAAM,CAACU,KAAK,CAAC,CACvD,CACAb,YAAY,gCAAKD,SAAS,MAAEF,WAAW,CAAEe,MAAM,CAACV,CAAC,CAACC,MAAM,CAACU,KAAK,CAAC,GAAE,CACnE,CAAC,CAED,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,IAAY,CAAK,CAChC,GAAMC,OAAM,CAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAG,EAAE,CAAC,CACpC,GAAMI,OAAM,CAAG,CAAC,GAAG,CAAGF,IAAI,CAACC,KAAK,CAACH,IAAI,CAAG,EAAE,CAAC,EAAEK,KAAK,CAAC,CAAC,CAAC,CAAC,CACtD,gBAAUJ,MAAM,aAAIG,MAAM,EAC5B,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,wBAAwB,WACpCxB,SAAS,cACR,KAAC,KAAK,EACJ,KAAK,CAAC,KAAK,CACX,MAAM,CAAC,KAAK,CACZ,IAAI,CAAC,SAAS,CACd,OAAO,CAAEW,UAAW,CACpB,SAAS,CAAC,UAAU,EACpB,cAEF,KAAC,IAAI,EACH,KAAK,CAAC,KAAK,CACX,MAAM,CAAC,KAAK,CACZ,IAAI,CAAC,SAAS,CACd,OAAO,CAAEA,UAAW,CACpB,SAAS,CAAC,UAAU,EAEvB,cAED,aAAK,SAAS,CAAC,iBAAiB,wBAC9B,aAAK,SAAS,CAAC,OAAO,wBACpB,cACE,SAAS,CAAC,aAAa,CACvB,QAAQ,CAAEK,UAAW,CACrB,GAAG,CAAE,CAAE,CACP,GAAG,CAAEZ,SAAS,CAACD,QAAQ,EAAI,CAAE,CAC7B,KAAK,CAAEC,SAAS,CAACF,WAAY,CAC7B,IAAI,CAAC,OAAO,EACZ,cACF,KAAC,YAAY,EAAC,SAAS,CAAEE,SAAU,EAAG,GAClC,cAEN,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,sBAAOe,OAAO,CAACf,SAAS,CAACF,WAAW,EAAI,CAAC,CAAC,EAAQ,cAClD,sBAAOiB,OAAO,CAACf,SAAS,CAACD,QAAQ,EAAI,CAAC,CAAC,EAAQ,GAC3C,GACF,cAEN,cACE,gBAAgB,CAAEO,gBAAiB,CACnC,YAAY,CAAEJ,gBAAiB,CAC/B,OAAO,CAAEK,UAAW,CACpB,GAAG,CAAEZ,QAAS,CACd,GAAG,CAAED,OAAQ,EACb,GACE,CAEV,CAEA,GAAM4B,aAAY,CAAGjC,MAAM,CAACkC,GAAG,uPAQzB,mBAAEvB,UAAS,OAATA,SAAS,OACXkB,KAAI,CAACM,KAAK,CAAExB,SAAS,CAACF,WAAW,CAAG,GAAG,CAAIE,SAAS,CAACD,QAAQ,CAAC,CAAG,GAAG,GAGzE,CAED,cAAeN,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}