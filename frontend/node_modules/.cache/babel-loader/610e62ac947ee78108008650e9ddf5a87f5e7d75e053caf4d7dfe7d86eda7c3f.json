{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\S07P31C209\\\\frontend\\\\src\\\\screens\\\\MessageDetail.tsx\",\n  _s = $RefreshSig$();\n// ** 메시지 상세\nimport { useState, useRef, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router';\nimport styled, { keyframes } from 'styled-components';\nimport '@screens/MessageDetail.scss';\nimport Content from '@messageDetail/Content';\nimport Like from '@messageDetail/Like';\nimport MoreMenu from '@common/MoreMenu';\nimport MoveToBack from '@common/MoveToBack';\nimport { ReactComponent as EllipsisVertical } from '@images/ellipsisVertical.svg';\nimport { notFound } from '@apis/router';\nimport { getMesssage } from '@apis/messageDetail/detailFunc';\nimport { intMessageId, convStringType, currentUser } from '@common/commonFunc';\n\n// dayType에 따른 다른 배경색 조합\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst dayTypeColors = [['f4b0ce', '5281b5', '08053b'],\n// 1 ~ 5시\n['e9fcfb', '8fdcfa', '0fc3ff'],\n// 6 ~ 10시\n['f7a937', 'b4d583', '32c9f7'],\n// 11 ~ 16시\n['851975', 'dd4e67', 'ff7100'],\n// 17 ~ 20시\n['010519', '1b396e', '03012e'] // 21 ~ 24시\n];\n\nfunction MessageDetail() {\n  _s();\n  // 풍선 저장 관련\n  const messageDetailRef = useRef(null);\n\n  // 전달 받은 messageId, type을 올바른 자료형으로 변환해서 변수에 저장\n  const navigate = useNavigate();\n  const params = useParams();\n  const messageId = intMessageId(params.id);\n  const type = convStringType(params.type);\n\n  // 현재 사용자 정보\n  const userId = currentUser();\n\n  // 서버 통신으로 게시글 정보 가져오기\n  const [data, setData] = useState(null);\n  const getDetailMessage = () => {\n    getMesssage(type, {\n      postId: messageId,\n      userId\n    }).then(res => {\n      console.log(res);\n      if (res.message === 'SUCCESS') {\n        setData(() => res.data);\n      } else {\n        // 실패했을 경우 404로 이동\n        navigate(notFound());\n      }\n    }).catch(error => navigate(notFound()));\n  };\n\n  // 현재 사용자가 작성한 게시글인지 확인\n  const isMine = () => (data === null || data === void 0 ? void 0 : data.userId) === userId;\n\n  // 전달 받은 messageId가 숫자가 아니라면 notfound로 이동\n  useEffect(() => {\n    if (messageId === -1) {\n      navigate(notFound());\n    } else if (type) {\n      getDetailMessage();\n    }\n  }, []);\n\n  // 비공개 글일 때 작성자가 자신이 아니면 404 페이지로 이동\n  useEffect(() => {\n    if (!isMine() && data !== null && data !== void 0 && data.status) {\n      navigate(notFound());\n    }\n  }, [data]);\n\n  // 메뉴 표시 여부\n  const [more, setMore] = useState(false);\n  const hiddenMenu = () => {\n    if (more) setMore(false);\n  };\n  const showMenu = () => setMore(!more);\n\n  // 공개 여부 변경\n  const [newStatus, setNewStatus] = useState(data === null || data === void 0 ? void 0 : data.status);\n  useEffect(() => {\n    setNewStatus(() => data === null || data === void 0 ? void 0 : data.status);\n  }, [data]);\n  const dayType = data === null || data === void 0 ? void 0 : data.dayType;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: data ? /*#__PURE__*/_jsxDEV(MessageDetailScreen, {\n      first: dayTypeColors[dayType][0],\n      second: dayTypeColors[dayType][1],\n      third: dayTypeColors[dayType][2],\n      ref: messageDetailRef,\n      onClick: hiddenMenu,\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        id: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          \"data-html2canvas-ignore\": \"true\",\n          className: \"ignore\",\n          children: [/*#__PURE__*/_jsxDEV(MoveToBack, {\n            path: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"message-detail-nav-more\",\n            onClick: showMenu,\n            children: /*#__PURE__*/_jsxDEV(EllipsisVertical, {\n              width: \"32\",\n              height: \"32\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MoreMenu, {\n            open: more,\n            isMine: isMine(),\n            detail: messageDetailRef,\n            messageId: messageId,\n            type: type,\n            close: hiddenMenu,\n            data: data,\n            status: newStatus,\n            setStatus: setNewStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(Content, {\n            data: data,\n            status: newStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Like, {\n            data: data,\n            type: type,\n            userId: userId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false);\n}\n_s(MessageDetail, \"2dsBH/gpWj+arQlyJ6Wwc4dRzjA=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = MessageDetail;\nconst gradient = keyframes`\n  0% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n`;\nconst MessageDetailScreen = styled.div`\n  background: linear-gradient(\n    -45deg,\n    ${props => ` #${props.first}, #${props.second}, #${props.third}`}\n  );\n  background-size: 400% 400%;\n  animation: ${gradient} 7s ease infinite;\n\n  display: flex;\n  justify-content: center;\n  width: 100vw;\n  height: 100vh;\n`;\n_c2 = MessageDetailScreen;\nexport default MessageDetail;\nvar _c, _c2;\n$RefreshReg$(_c, \"MessageDetail\");\n$RefreshReg$(_c2, \"MessageDetailScreen\");","map":{"version":3,"names":["useState","useRef","useEffect","useNavigate","useParams","styled","keyframes","Content","Like","MoreMenu","MoveToBack","ReactComponent","EllipsisVertical","notFound","getMesssage","intMessageId","convStringType","currentUser","dayTypeColors","MessageDetail","messageDetailRef","navigate","params","messageId","id","type","userId","data","setData","getDetailMessage","postId","then","res","console","log","message","catch","error","isMine","status","more","setMore","hiddenMenu","showMenu","newStatus","setNewStatus","dayType","gradient","MessageDetailScreen","div","props","first","second","third"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/screens/MessageDetail.tsx"],"sourcesContent":["// ** 메시지 상세\r\nimport {useState, useRef, useEffect} from 'react';\r\nimport {useNavigate, useParams} from 'react-router';\r\nimport styled, {keyframes} from 'styled-components';\r\n\r\nimport '@screens/MessageDetail.scss';\r\nimport Content from '@messageDetail/Content';\r\nimport Like from '@messageDetail/Like';\r\nimport MoreMenu from '@common/MoreMenu';\r\nimport MoveToBack from '@common/MoveToBack';\r\nimport {ReactComponent as EllipsisVertical} from '@images/ellipsisVertical.svg';\r\n\r\nimport {notFound} from '@apis/router';\r\nimport {getMesssage} from '@apis/messageDetail/detailFunc';\r\nimport {dataType} from '@apis/messageDetail/detailInterface';\r\nimport {intMessageId, convStringType, currentUser} from '@common/commonFunc';\r\n\r\n// dayType에 따른 다른 배경색 조합\r\nconst dayTypeColors = [\r\n  ['f4b0ce', '5281b5', '08053b'], // 1 ~ 5시\r\n  ['e9fcfb', '8fdcfa', '0fc3ff'], // 6 ~ 10시\r\n  ['f7a937', 'b4d583', '32c9f7'], // 11 ~ 16시\r\n  ['851975', 'dd4e67', 'ff7100'], // 17 ~ 20시\r\n  ['010519', '1b396e', '03012e'], // 21 ~ 24시\r\n];\r\n\r\nfunction MessageDetail() {\r\n  // 풍선 저장 관련\r\n  const messageDetailRef = useRef(null!);\r\n\r\n  // 전달 받은 messageId, type을 올바른 자료형으로 변환해서 변수에 저장\r\n  const navigate = useNavigate();\r\n  const params = useParams();\r\n  const messageId = intMessageId(params.id);\r\n  const type = convStringType(params.type);\r\n\r\n  // 현재 사용자 정보\r\n  const userId = currentUser();\r\n\r\n  // 서버 통신으로 게시글 정보 가져오기\r\n  const [data, setData] = useState<dataType>(null!);\r\n  const getDetailMessage = () => {\r\n    getMesssage(type, {postId: messageId, userId})\r\n      .then((res: any) => {\r\n        console.log(res);\r\n        if (res.message === 'SUCCESS') {\r\n          setData(() => res.data);\r\n        } else {\r\n          // 실패했을 경우 404로 이동\r\n          navigate(notFound());\r\n        }\r\n      })\r\n      .catch((error: any) => navigate(notFound()));\r\n  };\r\n\r\n  // 현재 사용자가 작성한 게시글인지 확인\r\n  const isMine = () => data?.userId === userId;\r\n\r\n  // 전달 받은 messageId가 숫자가 아니라면 notfound로 이동\r\n  useEffect(() => {\r\n    if (messageId === -1) {\r\n      navigate(notFound());\r\n    } else if (type) {\r\n      getDetailMessage();\r\n    }\r\n  }, []);\r\n\r\n  // 비공개 글일 때 작성자가 자신이 아니면 404 페이지로 이동\r\n  useEffect(() => {\r\n    if (!isMine() && data?.status) {\r\n      navigate(notFound());\r\n    }\r\n  }, [data]);\r\n\r\n  // 메뉴 표시 여부\r\n  const [more, setMore] = useState(false);\r\n\r\n  const hiddenMenu = () => {\r\n    if (more) setMore(false);\r\n  };\r\n\r\n  const showMenu = () => setMore(!more);\r\n\r\n  // 공개 여부 변경\r\n  const [newStatus, setNewStatus] = useState(data?.status);\r\n  useEffect(() => {\r\n    setNewStatus(() => data?.status);\r\n  }, [data]);\r\n\r\n  const dayType = data?.dayType;\r\n\r\n  return (\r\n    <>\r\n      {data ? (\r\n        <MessageDetailScreen\r\n          first={dayTypeColors[dayType][0]}\r\n          second={dayTypeColors[dayType][1]}\r\n          third={dayTypeColors[dayType][2]}\r\n          ref={messageDetailRef}\r\n          onClick={hiddenMenu}>\r\n          <main id=\"container\">\r\n            <section data-html2canvas-ignore=\"true\" className=\"ignore\">\r\n              <MoveToBack path=\"\" />\r\n              <div id=\"message-detail-nav-more\" onClick={showMenu}>\r\n                <EllipsisVertical width=\"32\" height=\"32\" fill=\"white\" />\r\n              </div>\r\n              <MoreMenu\r\n                open={more}\r\n                isMine={isMine()}\r\n                detail={messageDetailRef}\r\n                messageId={messageId}\r\n                type={type}\r\n                close={hiddenMenu}\r\n                data={data}\r\n                status={newStatus}\r\n                setStatus={setNewStatus}\r\n              />\r\n            </section>\r\n            <section className=\"container\">\r\n              <Content data={data} status={newStatus} />\r\n              <Like data={data} type={type} userId={userId} />\r\n            </section>\r\n          </main>\r\n        </MessageDetailScreen>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface BackgroundColorProps {\r\n  first: string;\r\n  second: string;\r\n  third: string;\r\n}\r\n\r\nconst gradient = keyframes`\r\n  0% {\r\n    background-position: 0% 50%;\r\n  }\r\n  50% {\r\n    background-position: 100% 50%;\r\n  }\r\n  100% {\r\n    background-position: 0% 50%;\r\n  }\r\n`;\r\n\r\nconst MessageDetailScreen = styled.div`\r\n  background: linear-gradient(\r\n    -45deg,\r\n    ${(props: BackgroundColorProps) =>\r\n      ` #${props.first}, #${props.second}, #${props.third}`}\r\n  );\r\n  background-size: 400% 400%;\r\n  animation: ${gradient} 7s ease infinite;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100vw;\r\n  height: 100vh;\r\n`;\r\n\r\nexport default MessageDetail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}