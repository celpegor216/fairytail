{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\S07P31C209\\\\frontend\\\\src\\\\screens\\\\MessageList.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport '@screens/MessageList.scss';\nimport MyMessage from '@messageList/MyMessage';\nimport MoveToBack from '@common/MoveToBack';\nimport { main, notFound } from '@apis/router';\nimport { getMesssageList } from '@/apis/messageList';\nimport { currentUser } from '@/components/common/commonFunc';\nimport { ReactComponent as Filter } from '@images/filter.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MessageList() {\n  _s();\n  const [messageItems, setMessageItems] = useState();\n  const [filterState, setFilterState] = useState(true);\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // 0: text, 1: img, 2:video, 3:audio\n  const types = [0, 1, 2, 3];\n  const userId = currentUser();\n  const handleFilter = () => {\n    setFilterState(!filterState);\n  };\n  useEffect(() => {\n    if (userId !== -1) {\n      types.forEach(type => {\n        getMesssageList(type, userId).then(res => {\n          setMessageItems(() => res.data);\n        }).catch(err => {\n          console.log(err);\n        });\n      });\n    } else {\n      navigate(notFound());\n    }\n    if (messageItems && (messageItems === null || messageItems === void 0 ? void 0 : messageItems.length) > 0) {\n      console.log(messageItems[0].date);\n    }\n  }, [location.pathname]);\n\n  // messageList 최신순으로 정렬\n  useEffect(() => {\n    if (messageItems && messageItems.length > 0) {\n      messageItems.sort((a, b) => a.date < b.date ? 1 : a.date > b.date ? -1 : 0);\n    } else {\n      messageItems === null || messageItems === void 0 ? void 0 : messageItems.sort((a, b) => a.date < b.date ? -1 : a.date > b.date ? 1 : 0);\n    }\n  }, [messageItems, filterState]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: messageItems ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messageList\",\n      children: [/*#__PURE__*/_jsxDEV(MoveToBack, {\n        path: main()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messageList-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messageList-container-info\",\n          children: \"\\uB0B4 \\uC774\\uC57C\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messageList-container-filter\",\n          onClick: () => handleFilter(),\n          children: /*#__PURE__*/_jsxDEV(Filter, {\n            viewBox: \"0 0 80 80\",\n            fill: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messageList-container-list\",\n          children: [messageItems.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"messageList-container-list-empty\",\n            children: \"\\uC791\\uC131\\uD55C \\uBA54\\uC138\\uC9C0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this), messageItems.length !== 0 && messageItems.map(messageItem => {\n            return /*#__PURE__*/_jsxDEV(MyMessage, {\n              messageItem: messageItem\n            }, `${messageItem.type}+${messageItem.postId}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 21\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false);\n}\n_s(MessageList, \"EwarrlN7vxFbUghq1p0m3f0uVfw=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = MessageList;\nexport default MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["useEffect","useState","useLocation","useNavigate","MyMessage","MoveToBack","main","notFound","getMesssageList","currentUser","ReactComponent","Filter","MessageList","messageItems","setMessageItems","filterState","setFilterState","location","navigate","types","userId","handleFilter","forEach","type","then","res","data","catch","err","console","log","length","date","pathname","sort","a","b","map","messageItem","postId"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/screens/MessageList.tsx"],"sourcesContent":["import {useEffect, useState} from 'react';\r\nimport {useLocation, useNavigate} from 'react-router-dom';\r\nimport '@screens/MessageList.scss';\r\nimport MyMessage from '@messageList/MyMessage';\r\nimport MoveToBack from '@common/MoveToBack';\r\nimport {main, notFound} from '@apis/router';\r\nimport {getMesssageList} from '@/apis/messageList';\r\nimport {currentUser} from '@/components/common/commonFunc';\r\nimport {ReactComponent as Filter} from '@images/filter.svg';\r\n\r\ninterface items {\r\n  postId: number;\r\n  date: string;\r\n  emojiNo: number;\r\n  likeCnt: number;\r\n  status: number;\r\n  title: string;\r\n  type: number;\r\n}\r\n\r\nfunction MessageList() {\r\n  const [messageItems, setMessageItems] = useState<items[]>();\r\n  const [filterState, setFilterState] = useState(true);\r\n\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  // 0: text, 1: img, 2:video, 3:audio\r\n  const types = [0, 1, 2, 3];\r\n  const userId = currentUser();\r\n\r\n  const handleFilter = () => {\r\n    setFilterState(!filterState);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userId !== -1) {\r\n      types.forEach(type => {\r\n        getMesssageList(type, userId)\r\n          .then(res => {\r\n            setMessageItems(() => res.data);\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n      });\r\n    } else {\r\n      navigate(notFound());\r\n    }\r\n    if (messageItems && messageItems?.length > 0) {\r\n      console.log(messageItems[0].date);\r\n    }\r\n  }, [location.pathname]);\r\n\r\n  // messageList 최신순으로 정렬\r\n  useEffect(() => {\r\n    if (messageItems && messageItems.length > 0) {\r\n      messageItems.sort((a, b) =>\r\n        a.date < b.date ? 1 : a.date > b.date ? -1 : 0,\r\n      );\r\n    } else {\r\n      messageItems?.sort((a, b) =>\r\n        a.date < b.date ? -1 : a.date > b.date ? 1 : 0,\r\n      );\r\n    }\r\n  }, [messageItems, filterState]);\r\n\r\n  return (\r\n    <>\r\n      {messageItems ? (\r\n        <div className=\"messageList\">\r\n          <MoveToBack path={main()} />\r\n          {/* <div className=\"navbarContainer\">\r\n        </div> */}\r\n          <div className=\"messageList-container\">\r\n            <div className=\"messageList-container-info\">내 이야기</div>\r\n            <div\r\n              className=\"messageList-container-filter\"\r\n              onClick={() => handleFilter()}>\r\n              <Filter viewBox=\"0 0 80 80\" fill=\"white\" />\r\n            </div>\r\n\r\n            <div className=\"messageList-container-list\">\r\n              {messageItems.length === 0 && (\r\n                <div className=\"messageList-container-list-empty\">\r\n                  작성한 메세지가 없습니다.\r\n                </div>\r\n              )}\r\n              {messageItems.length !== 0 &&\r\n                messageItems.map(messageItem => {\r\n                  return (\r\n                    <MyMessage\r\n                      key={`${messageItem.type}+${messageItem.postId}`}\r\n                      messageItem={messageItem}\r\n                    />\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MessageList;\r\n"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,SAAQC,WAAW,EAAEC,WAAW,QAAO,kBAAkB;AACzD,OAAO,2BAA2B;AAClC,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,UAAU,MAAM,oBAAoB;AAC3C,SAAQC,IAAI,EAAEC,QAAQ,QAAO,cAAc;AAC3C,SAAQC,eAAe,QAAO,oBAAoB;AAClD,SAAQC,WAAW,QAAO,gCAAgC;AAC1D,SAAQC,cAAc,IAAIC,MAAM,QAAO,oBAAoB;AAAC;AAAA;AAY5D,SAASC,WAAW,GAAG;EAAA;EACrB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,EAAW;EAC3D,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAEpD,MAAMgB,QAAQ,GAAGf,WAAW,EAAE;EAC9B,MAAMgB,QAAQ,GAAGf,WAAW,EAAE;;EAE9B;EACA,MAAMgB,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC1B,MAAMC,MAAM,GAAGX,WAAW,EAAE;EAE5B,MAAMY,YAAY,GAAG,MAAM;IACzBL,cAAc,CAAC,CAACD,WAAW,CAAC;EAC9B,CAAC;EAEDf,SAAS,CAAC,MAAM;IACd,IAAIoB,MAAM,KAAK,CAAC,CAAC,EAAE;MACjBD,KAAK,CAACG,OAAO,CAACC,IAAI,IAAI;QACpBf,eAAe,CAACe,IAAI,EAAEH,MAAM,CAAC,CAC1BI,IAAI,CAACC,GAAG,IAAI;UACXX,eAAe,CAAC,MAAMW,GAAG,CAACC,IAAI,CAAC;QACjC,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;UACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAClB,CAAC,CAAC;MACN,CAAC,CAAC;IACJ,CAAC,MAAM;MACLV,QAAQ,CAACX,QAAQ,EAAE,CAAC;IACtB;IACA,IAAIM,YAAY,IAAI,CAAAA,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEkB,MAAM,IAAG,CAAC,EAAE;MAC5CF,OAAO,CAACC,GAAG,CAACjB,YAAY,CAAC,CAAC,CAAC,CAACmB,IAAI,CAAC;IACnC;EACF,CAAC,EAAE,CAACf,QAAQ,CAACgB,QAAQ,CAAC,CAAC;;EAEvB;EACAjC,SAAS,CAAC,MAAM;IACd,IAAIa,YAAY,IAAIA,YAAY,CAACkB,MAAM,GAAG,CAAC,EAAE;MAC3ClB,YAAY,CAACqB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KACrBD,CAAC,CAACH,IAAI,GAAGI,CAAC,CAACJ,IAAI,GAAG,CAAC,GAAGG,CAAC,CAACH,IAAI,GAAGI,CAAC,CAACJ,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAC/C;IACH,CAAC,MAAM;MACLnB,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEqB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KACtBD,CAAC,CAACH,IAAI,GAAGI,CAAC,CAACJ,IAAI,GAAG,CAAC,CAAC,GAAGG,CAAC,CAACH,IAAI,GAAGI,CAAC,CAACJ,IAAI,GAAG,CAAC,GAAG,CAAC,CAC/C;IACH;EACF,CAAC,EAAE,CAACnB,YAAY,EAAEE,WAAW,CAAC,CAAC;EAE/B,oBACE;IAAA,UACGF,YAAY,gBACX;MAAK,SAAS,EAAC,aAAa;MAAA,wBAC1B,QAAC,UAAU;QAAC,IAAI,EAAEP,IAAI;MAAG;QAAA;QAAA;QAAA;MAAA,QAAG,eAG5B;QAAK,SAAS,EAAC,uBAAuB;QAAA,wBACpC;UAAK,SAAS,EAAC,4BAA4B;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAY,eACvD;UACE,SAAS,EAAC,8BAA8B;UACxC,OAAO,EAAE,MAAMe,YAAY,EAAG;UAAA,uBAC9B,QAAC,MAAM;YAAC,OAAO,EAAC,WAAW;YAAC,IAAI,EAAC;UAAO;YAAA;YAAA;YAAA;UAAA;QAAG;UAAA;UAAA;UAAA;QAAA,QACvC,eAEN;UAAK,SAAS,EAAC,4BAA4B;UAAA,WACxCR,YAAY,CAACkB,MAAM,KAAK,CAAC,iBACxB;YAAK,SAAS,EAAC,kCAAkC;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAGlD,EACAlB,YAAY,CAACkB,MAAM,KAAK,CAAC,IACxBlB,YAAY,CAACwB,GAAG,CAACC,WAAW,IAAI;YAC9B,oBACE,QAAC,SAAS;cAER,WAAW,EAAEA;YAAY,GADnB,GAAEA,WAAW,CAACf,IAAK,IAAGe,WAAW,CAACC,MAAO,EAAC;cAAA;cAAA;cAAA;YAAA,QAEhD;UAEN,CAAC,CAAC;QAAA;UAAA;UAAA;UAAA;QAAA,QACA;MAAA;QAAA;QAAA;QAAA;MAAA,QACF;IAAA;MAAA;MAAA;MAAA;IAAA,QACF,GACJ;EAAI,iBACP;AAEP;AAAC,GAnFQ3B,WAAW;EAAA,QAIDV,WAAW,EACXC,WAAW;AAAA;AAAA,KALrBS,WAAW;AAqFpB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}