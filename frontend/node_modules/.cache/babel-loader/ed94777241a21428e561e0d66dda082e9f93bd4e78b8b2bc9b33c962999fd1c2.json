{"ast":null,"code":"// ** fcm으로 요청보낼 때 필요한 토큰 관련\n\nimport { getMessaging, getToken } from 'firebase/messaging';\nimport { app } from '@apis/notifications/firebaseConfig';\nimport { iOS } from '@common/commonFunc';\nconst messaging = getMessaging(app);\n\n// 토큰 받아오기\nexport const initToken = async () => {\n  const token = getToken(messaging, {\n    vapidKey: process.env.REACT_APP_VAPID_KEY\n  }).then(async currentToken => {\n    if (currentToken) {\n      return currentToken;\n    } else {\n      console.log('No registration token available. Request permission to generate one.');\n      return '';\n    }\n  }).catch(err => {\n    console.log('An error occurred while retrieving token. ', err);\n    return '';\n  });\n  return token;\n};\n\n// 등록 토큰에 액세스 (알림 권한 요청)\nexport const requestPermission = () => {\n  if (!iOS()) {\n    Notification.requestPermission().then(permission => {\n      if (permission !== 'denied') {\n        localStorage.setItem('noti', 'true');\n      }\n    });\n  }\n};","map":{"version":3,"names":["getMessaging","getToken","app","iOS","messaging","initToken","token","vapidKey","process","env","REACT_APP_VAPID_KEY","then","currentToken","console","log","catch","err","requestPermission","Notification","permission","localStorage","setItem"],"sources":["C:/Users/Administrator/Desktop/S07P31C209/frontend/src/apis/notifications/getMessagingToken.ts"],"sourcesContent":["// ** fcm으로 요청보낼 때 필요한 토큰 관련\r\n\r\nimport {getMessaging, getToken} from 'firebase/messaging';\r\nimport {app} from '@apis/notifications/firebaseConfig';\r\nimport {iOS} from '@common/commonFunc';\r\n\r\nconst messaging = getMessaging(app);\r\n\r\n// 토큰 받아오기\r\nexport const initToken = async () => {\r\n  const token = getToken(messaging, {\r\n    vapidKey: process.env.REACT_APP_VAPID_KEY,\r\n  })\r\n    .then(async currentToken => {\r\n      if (currentToken) {\r\n        return currentToken;\r\n      } else {\r\n        console.log(\r\n          'No registration token available. Request permission to generate one.',\r\n        );\r\n        return '';\r\n      }\r\n    })\r\n    .catch(err => {\r\n      console.log('An error occurred while retrieving token. ', err);\r\n      return '';\r\n    });\r\n  return token;\r\n};\r\n\r\n// 등록 토큰에 액세스 (알림 권한 요청)\r\nexport const requestPermission = () => {\r\n  if (!iOS()) {\r\n    Notification.requestPermission().then(permission => {\r\n      if (permission !== 'denied') {\r\n        localStorage.setItem('noti', 'true');\r\n      }\r\n    });\r\n  }\r\n};\r\n"],"mappings":"AAAA;;AAEA,SAAQA,YAAY,EAAEC,QAAQ,QAAO,oBAAoB;AACzD,SAAQC,GAAG,QAAO,oCAAoC;AACtD,SAAQC,GAAG,QAAO,oBAAoB;AAEtC,MAAMC,SAAS,GAAGJ,YAAY,CAACE,GAAG,CAAC;;AAEnC;AACA,OAAO,MAAMG,SAAS,GAAG,YAAY;EACnC,MAAMC,KAAK,GAAGL,QAAQ,CAACG,SAAS,EAAE;IAChCG,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC;EACxB,CAAC,CAAC,CACCC,IAAI,CAAC,MAAMC,YAAY,IAAI;IAC1B,IAAIA,YAAY,EAAE;MAChB,OAAOA,YAAY;IACrB,CAAC,MAAM;MACLC,OAAO,CAACC,GAAG,CACT,sEAAsE,CACvE;MACD,OAAO,EAAE;IACX;EACF,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;IACZH,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAEE,GAAG,CAAC;IAC9D,OAAO,EAAE;EACX,CAAC,CAAC;EACJ,OAAOV,KAAK;AACd,CAAC;;AAED;AACA,OAAO,MAAMW,iBAAiB,GAAG,MAAM;EACrC,IAAI,CAACd,GAAG,EAAE,EAAE;IACVe,YAAY,CAACD,iBAAiB,EAAE,CAACN,IAAI,CAACQ,UAAU,IAAI;MAClD,IAAIA,UAAU,KAAK,QAAQ,EAAE;QAC3BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;MACtC;IACF,CAAC,CAAC;EACJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}